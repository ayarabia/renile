import{r as i,j as e,i as f}from"./index-rw0F91Ua.js";import"./react-apexcharts.min-if_qc7C2.js";import{f as k,P as I,F as L,M as B,a as E}from"./table-KeYeWRiI.js";import{Q as H,B as c}from"./ReactToastify-rLLV0sG1.js";import{W as J}from"./index-Lzdlw9xk.js";function T(d){const m=d.columns,[j,y]=i.useState(),[v,u]=i.useState(!1),[o,l]=i.useState(d.rows),N=t=>{const s=o.map(a=>a===t?{...a,editing:!0}:a);l(s),localStorage.setItem("ammoniData",JSON.stringify([...s]))},D=t=>{const s=o.map(a=>a===t?{...a,editing:!1}:a);l(s),localStorage.setItem("ammoniData",JSON.stringify([...s]))},S=t=>{const s=[...o];s.splice(t,1),l(s),localStorage.setItem("ammoniData",JSON.stringify([...s]))};i.useState(!0),new Date().toISOString().split("T")[0];const[g,W]=i.useState(""),[h,M]=i.useState(""),b=o.filter(t=>{const s=new Date(t.date),a=g!==""?new Date(g):null,n=h!==""?new Date(h):null;return!(a&&s<a||n&&s>n)}),[r,p]=i.useState({date:"",dissolvedOxygen:"",pHLevels:"",temperature:""}),[O,x]=i.useState(!1),C=()=>{x(!0)},R=()=>{p({date:"",dissolvedOxygen:"",pHLevels:"",temperature:""}),x(!1),u(!1)},w=t=>{const s=d.url;console.log(s),f.post(s,t).then(a=>{console.log(a.data.result),c.success(a.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0}),y(a.data.result),u(!0)}).catch(a=>{c.error(a.response.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})})},A=()=>{w(r)},F=t=>{f.post("waterquality",t).then(s=>{console.log(s.data.result),c.success(s.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})}).catch(s=>{c.error(s.response.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})})},P=()=>{F(r),l([...o,r]),p({date:"",dissolvedOxygen:"",pHLevels:"",temperature:""}),localStorage.setItem("ammoniData",JSON.stringify([...o,r])),x(!1),u(!1)};return i.useEffect(()=>{const t=localStorage.getItem("ammoniData");t&&l(JSON.parse(t))},[]),e.jsxs("div",{className:"bg-white rounded-[20px] shadow-3xl px-6 py-8 mt-8 ",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#121811] font-medium text-2xl mb-2",children:"Ammonia Toxicity Data"}),e.jsx("p",{className:"text-[#646464] text-xs font-normal",children:"Forecast Ammonia Toxicity data for the next months."})]}),e.jsx("div",{className:"lg:flex items-center justify-end lg:mt-0 mt-4 ",children:e.jsxs("button",{onClick:C,className:" flex items-center bg-primary py-2 px-3 rounded-xl text-white shadow-3xl text-base font-semibold",children:[e.jsx("img",{src:k,alt:"Forecast image",className:"me-2"}),"Forecast Data"]})}),e.jsx(I,{isOpen:O,onClose:R,addRow:P,setNewRow:p,data:r,ammoniaAmount:j,showAmmoniaAmount:v,getAmount:A}),e.jsx(H,{})]}),e.jsx("div",{className:"overflow-x-auto tableData w-full shadow-3xl mt-12",children:e.jsxs("table",{children:[e.jsx("thead",{className:"bg-[#F8F8F8] text-[#041300]  text-left rounded-t-lg font-medium text-xs ",children:e.jsxs("tr",{children:[m==null?void 0:m.map(t=>e.jsx("th",{className:"py-6 px-8",children:t},t)),e.jsx("th",{className:"py-6 px-8",children:"Action"})]})}),e.jsx("tbody",{className:" text-left ",children:b.map((t,s)=>e.jsxs("tr",{children:[!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.date}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.ph}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.dissolved_oxygen}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.temperature}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"text",value:t.date,onChange:a=>{const n=[...o];n[s].date=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"number",value:t.dissolvedOxygen,onChange:a=>{const n=[...o];n[s].dissolvedOxygen=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"number",value:t.pHLevels,onChange:a=>{const n=[...o];n[s].pHLevels=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 px-8",children:e.jsx("input",{type:"number",value:t.temperature,onChange:a=>{const n=[...o];n[s].temperature=a.target.value,l(n)}})}),e.jsxs("td",{children:[!t.editing&&e.jsx("button",{className:"edit-button",onClick:()=>N(t),children:e.jsx(L,{})}),t.editing&&e.jsx("button",{className:"save-button",onClick:()=>D(t),children:e.jsx(B,{})}),e.jsx("button",{className:"delete-button",onClick:()=>S(s),children:e.jsx(E,{})})]})]},s))})]})})]})}function K(){return e.jsxs("div",{className:"mt-[30px]",children:[e.jsx(J,{}),e.jsx(T,{url:"predict/feed"})]})}export{K as default};
