import{r,i as j,j as e}from"./index-rw0F91Ua.js";import{A as O}from"./index-BeXf4N5b.js";import{f as E,P as T,F as B,M as q,a as L}from"./table-KeYeWRiI.js";import{Q as M,B as x}from"./ReactToastify-rLLV0sG1.js";import{f as v}from"./filter-4UfVbWB8.js";import"./react-apexcharts.min-if_qc7C2.js";function Q(i){const c=i.columns,[p,m]=r.useState(),[h,d]=r.useState(!1),[o,l]=r.useState([]);r.useEffect(()=>{j.get(i.tableDataUrl).then(t=>{l(t.data.data)}).catch(t=>{console.error("Error fetching data:",t)})},[]),console.log(o);const N=t=>{const s=o.map(a=>a===t?{...a,editing:!0}:a);l(s)},D=t=>{const s=o.map(a=>a===t?{...a,editing:!1}:a);l(s)},w=t=>{const s=[...o];s.splice(t,1),l(s)},b=i.startDate,y=i.endDate,C=o.filter(t=>{const s=new Date(t.date),a=b!==""?new Date(b):null,n=y!==""?new Date(y):null;return!(a&&s<a||n&&s>n)}),[u,g]=r.useState({date:"",dissolved_oxygen:"",ph:"",temperature:""}),[R,f]=r.useState(!1),A=()=>{f(!0)},P=()=>{g({date:"",dissolved_oxygen:"",ph:"",temperature:""}),f(!1),d(!1)},F=t=>{const s=i.url;console.log(s),j.post(s,t).then(a=>{console.log(a.data.result),x.success(a.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0}),m(a.data.result),d(!0)}).catch(a=>{x.error(a.response.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})})},S=()=>{F(u)},_=t=>{j.post("waterquality",t).then(s=>{console.log(s.data.result),x.success(s.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})}).catch(s=>{x.error(s.response.data.message,{position:"top-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0})})},k=()=>{_(u),l([...o,u]),g({date:"",dissolved_oxygen:"",ph:"",temperature:""}),f(!1),d(!1)};return e.jsxs("div",{className:"bg-white rounded-[20px] shadow-3xl px-6 py-8 mt-8 ",children:[e.jsxs("div",{className:"flex justify-between items-center flex-wrap",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#121811] font-medium text-2xl mb-2",children:"Ammonia Toxicity Data"}),e.jsx("p",{className:"text-[#646464] text-xs font-normal",children:"Forecast Ammonia Toxicity data for the next months."})]}),e.jsx("div",{className:"lg:flex items-center justify-end lg:mt-0 mt-4 ",children:e.jsxs("button",{onClick:A,className:" flex items-center bg-primary py-2 px-3 rounded-xl text-white shadow-3xl text-base font-semibold",children:[e.jsx("img",{src:E,alt:"Forecast image",className:"me-2"}),"Forecast Data"]})}),e.jsx(T,{isOpen:R,onClose:P,addRow:k,setNewRow:g,data:u,amount:p,showAmmoniaAmount:h,getAmount:S,text:i.text}),e.jsx(M,{})]}),e.jsx("div",{className:"overflow-x-auto tableData w-full shadow-3xl mt-12",children:e.jsxs("table",{children:[e.jsx("thead",{className:"bg-[#F8F8F8] text-[#041300]  text-left rounded-t-lg font-medium text-xs ",children:e.jsxs("tr",{children:[c==null?void 0:c.map(t=>e.jsx("th",{className:"py-6 px-8",children:t},t)),e.jsx("th",{className:"py-6 px-8",children:"Action"})]})}),e.jsx("tbody",{className:" text-left ",children:C.map((t,s)=>e.jsxs("tr",{children:[!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.date}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.ph}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.dissolved_oxygen}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.temperature}),!t.editing&&e.jsx("td",{className:"py-6 px-8",children:t.predicted_ammonia}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"text",value:t.date,onChange:a=>{const n=[...o];n[s].date=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"number",value:t.ph,onChange:a=>{const n=[...o];n[s].ph=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 ps-8",children:e.jsx("input",{type:"number",value:t.dissolved_oxygen,onChange:a=>{const n=[...o];n[s].dissolved_oxygen=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 px-8",children:e.jsx("input",{type:"number",value:t.temperature,onChange:a=>{const n=[...o];n[s].temperature=a.target.value,l(n)}})}),t.editing&&e.jsx("td",{className:"py-6 px-8",children:e.jsx("input",{type:"number",value:t.predicted_ammonia,onChange:a=>{const n=[...o];n[s].predicted_ammonia=a.target.value,l(n)}})}),e.jsxs("td",{children:[!t.editing&&e.jsx("button",{className:"edit-button",onClick:()=>N(t),children:e.jsx(B,{})}),t.editing&&e.jsx("button",{className:"save-button",onClick:()=>D(t),children:e.jsx(q,{})}),e.jsx("button",{className:"delete-button",onClick:()=>w(s),children:e.jsx(L,{})})]})]},s))})]})})]})}function J(){const i=["Date","PH Levels","Dissolved Oxygen","Temperature","Predicted Ammonia"],[c,p]=r.useState(!0),[m,h]=r.useState(""),[d,o]=r.useState("");return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center lg:justify-end lg:mt-0 mt-4 flex-wrap lg:mb-10 ",children:[e.jsxs("div",{className:"flex items-center relative mb-4 lg:mb-0 bg-white py-2 px-3 rounded-xl text-primary shadow-3xl text-base font-medium border border-[#D0D5DD]  ",children:[e.jsx("img",{src:v,alt:"filtaration",className:"me-2"}),e.jsx("span",{className:"ms-2 bg-transparnt whitespace-nowrap  text-primary  text-base font-normal",children:c?"start date":m}),e.jsx("input",{type:"date",name:"date",value:m,onChange:l=>{h(l.target.value),p(!1)},className:"bg-transparnt w-full  placeholder: text-primary  text-base font-normal"})]}),e.jsxs("div",{className:"flex lg:ms-3 items-center relative mb-4 lg:mb-0 bg-white py-2 px-3 rounded-xl text-primary shadow-3xl text-base font-medium border border-[#D0D5DD]  ",children:[e.jsx("img",{src:v,alt:"filtaration",className:"me-2"}),e.jsx("span",{className:"ms-2 bg-transparnt whitespace-nowrap  text-primary  text-base font-normal",children:c?"end date":d}),e.jsx("input",{type:"date",name:"date",value:d,onChange:l=>{o(l.target.value),p(!1)},className:"bg-transparnt w-full placeholder: text-primary  text-base font-normal"})]})]}),e.jsx(O,{}),e.jsx(Q,{text:"Predicted Toxic Ammonia",url:"predict/ammonia",columns:i,tableDataUrl:"waterquality/ammonia/table",startDate:m,endDate:d})]})}export{J as default};
